#!/usr/bin/env sh

# ì»¤ë°‹ ë©”ì‹œì§€ íŒŒì¼ ì½ê¸°
commit_msg=$(cat "$1")

# Real Teeth í”„ë¡œì íŠ¸ ì»¤ë°‹ ì»¨ë²¤ì…˜ ê²€ì¦
# íŒ¨í„´: ì¼ë°˜ ì»¨ë²¤ì…”ë„ ì»¤ë°‹
conventional_pattern="^(feat|fix|refactor|style|docs|test|chore|perf|ci|build|revert)(\(.+\))?: .{1,50}"

echo "ğŸ” ì»¤ë°‹ ë©”ì‹œì§€ ê²€ì¦ ì¤‘..."
echo "ë©”ì‹œì§€: $commit_msg"

if echo "$commit_msg" | grep -qE "$conventional_pattern"; then
    echo "âœ… ì»¤ë°‹ ë©”ì‹œì§€ ê·œì¹™ í†µê³¼"
    exit 0
else
    echo "âŒ ì»¤ë°‹ ë©”ì‹œì§€ ê·œì¹™ ìœ„ë°˜"
    echo ""
    echo "ğŸ“‹ ì˜¬ë°”ë¥¸ í˜•ì‹:"
    echo "1. ì¼ë°˜ ì»¨ë²¤ì…˜: feat: ê¸°ëŠ¥ ì¶”ê°€"
    echo ""
    echo "ğŸ“ ì§€ì›í•˜ëŠ” íƒ€ì…:"
    echo "- feat: ìƒˆë¡œìš´ ê¸°ëŠ¥"
    echo "- fix: ë²„ê·¸ ìˆ˜ì •"
    echo "- refactor: ë¦¬íŒ©í† ë§"
    echo "- style: UI/UX ê°œì„ "
    echo "- docs: ë¬¸ì„œ ì—…ë°ì´íŠ¸"
    echo "- test: í…ŒìŠ¤íŠ¸ ì¶”ê°€/ìˆ˜ì •"
    echo "- chore: ë¹Œë“œ/ë„êµ¬ ì„¤ì •"
    echo ""
    echo "ğŸ’¡ ì˜ˆì‹œ:"
    echo "feat: ì‚¬ìš©ì ì¸ì¦ ê¸°ëŠ¥ ì¶”ê°€"
    exit 1
fi
